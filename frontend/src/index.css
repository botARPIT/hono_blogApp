@import "tailwindcss";
@plugin "tailwindcss-animate";
@plugin "@tailwindcss/typography";

@theme {
  --font-sans: "Inter", ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";

  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));

  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));

  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));

  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));

  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));

  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));

  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));

  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));

  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));

  --animate-in: enter 0.2s ease-out;
  --animate-out: exit 0.2s ease-in;
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;
  }

  /* Reader Mode - Warm, sepia-toned theme for comfortable reading */
  .reader {
    /* Warm cream/sepia background - reduces blue light and eye strain */
    --background: 39 32% 96%;
    --foreground: 28 15% 20%;
    
    /* Cards with subtle warmth */
    --card: 40 30% 98%;
    --card-foreground: 28 15% 20%;
    
    /* Popovers matching the warm theme */
    --popover: 40 30% 98%;
    --popover-foreground: 28 15% 20%;
    
    /* Warm brown primary color */
    --primary: 28 40% 35%;
    --primary-foreground: 40 30% 98%;
    
    /* Soft sepia secondary */
    --secondary: 38 25% 90%;
    --secondary-foreground: 28 20% 25%;
    
    /* Muted tones for less important text */
    --muted: 38 20% 92%;
    --muted-foreground: 28 12% 45%;
    
    /* Warm accent for highlights */
    --accent: 38 25% 90%;
    --accent-foreground: 28 20% 25%;
    
    /* Softer destructive color */
    --destructive: 0 50% 50%;
    --destructive-foreground: 40 30% 98%;
    
    /* Subtle warm borders */
    --border: 35 20% 88%;
    --input: 35 20% 88%;
    --ring: 28 30% 45%;
  }
}

@layer base {
  * {
    border-color: hsl(var(--border));
  }
  body {
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    transition-property: background-color, border-color, color, fill, stroke;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 300ms;
  }
}

/* Sonner Toast Styles - ensure toasts are visible above all content */
[data-sonner-toaster] {
  z-index: 9999 !important;
}

[data-sonner-toast] {
  --normal-bg: hsl(var(--background));
  --normal-border: hsl(var(--border));
  --normal-text: hsl(var(--foreground));
}

/* TipTap Editor Styles */
.ProseMirror {
    outline: none;
    min-height: 300px;
    padding: 1rem;
    color: hsl(var(--foreground));
}

.dark .ProseMirror {
    color: hsl(var(--foreground));
}

.ProseMirror p.is-editor-empty:first-child::before {
  color: #adb5bd;
  content: attr(data-placeholder);
  float: left;
  height: 0;
  pointer-events: none;
}

.ProseMirror ul {
  list-style-type: disc;
  padding-left: 1.5rem;
}

.ProseMirror ol {
  list-style-type: decimal;
  padding-left: 1.5rem;
}

.ProseMirror h1 {
  font-size: 2rem;
  font-weight: bold;
  color: inherit;
}

.ProseMirror h2 {
  font-size: 1.5rem;
  font-weight: bold;
  color: inherit;
}

.ProseMirror strong, .ProseMirror b {
  color: hsl(var(--foreground));
  font-weight: bold;
}

.prose {
  --tw-prose-body: hsl(var(--foreground));
  --tw-prose-headings: hsl(var(--foreground));
  --tw-prose-lead: hsl(var(--muted-foreground));
  --tw-prose-links: hsl(var(--primary));
  --tw-prose-bold: hsl(var(--foreground));
  --tw-prose-counters: hsl(var(--muted-foreground));
  --tw-prose-bullets: hsl(var(--muted-foreground));
  --tw-prose-hr: hsl(var(--border));
  --tw-prose-quotes: hsl(var(--foreground));
  --tw-prose-quote-borders: hsl(var(--border));
  --tw-prose-captions: hsl(var(--muted-foreground));
  --tw-prose-code: hsl(var(--foreground));
  --tw-prose-pre-code: hsl(var(--foreground));
  --tw-prose-pre-bg: hsl(var(--muted));
  --tw-prose-th-borders: hsl(var(--border));
  --tw-prose-td-borders: hsl(var(--border));
}

/* Marker colors for lists */
.prose :where(ul > li)::marker,
.prose :where(ol > li)::marker {
  color: hsl(var(--foreground));
}

/* TipTap marker colors */
.ProseMirror ul li::marker,
.ProseMirror ol li::marker {
  color: hsl(var(--foreground));
}

.ProseMirror blockquote {
  border-left: 3px solid hsl(var(--border));
  padding-left: 1rem;
  font-style: italic;
  color: hsl(var(--muted-foreground));
}

.ProseMirror code {
  background-color: hsl(var(--muted));
  color: hsl(var(--primary));
  padding: 0.2rem 0.4rem;
  border-radius: 0.25rem;
}

.dark .ProseMirror code {
  color: hsl(var(--foreground));
}

/* Reader Mode Specific Styles */
.reader .ProseMirror {
  line-height: 1.8;
  letter-spacing: 0.01em;
}

.reader .ProseMirror code {
  background-color: hsl(38 20% 88%);
  color: hsl(28 30% 30%);
}

/* Reader mode link styling */
.reader a {
  color: hsl(28 50% 40%);
  text-decoration-color: hsl(28 30% 60%);
}

.reader a:hover {
  color: hsl(28 60% 30%);
}

/* Reader mode enhanced prose styling */
.reader .prose {
  line-height: 1.85;
  letter-spacing: 0.01em;
}